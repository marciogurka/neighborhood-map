function initMap(){function e(){var e=new google.maps.Geocoder,o=document.getElementById("searchAutoComplete").value;""!=o&&e.geocode({address:o,componentRestrictions:{locality:o}},function(e,o){o==google.maps.GeocoderStatus.OK?(i.setCenter(e[0].geometry.location),i.setZoom(15)):window.alert("We could not find that location - try entering a more specific place.")})}function o(e){n(placeMarkers);var o=e.getPlaces();0==o.length?placesList.removeAll():(t(o),a(o))}function t(e){placesList.removeAll(),e.forEach(function(e){placesList.push(e)})}function n(e){for(var o=0;o<e.length;o++)e[o].setMap(null)}function a(e){for(var o=new google.maps.LatLngBounds,t=0;t<e.length;t++){var n=e[t],a=new google.maps.Marker({map:i,title:n.name,position:n.geometry.location,id:n.place_id,animation:google.maps.Animation.DROP}),s=new google.maps.InfoWindow;google.maps.event.addListener(s,"closeclick",function(){a.setAnimation(null)}),a.addListener("click",function(){a.setAnimation(google.maps.Animation.BOUNCE),s.marker!=this&&r(this,s)}),placeMarkers.push(a),n.geometry.viewport?o.union(n.geometry.viewport):o.extend(n.geometry.location)}i.fitBounds(o)}function r(e,o){new google.maps.places.PlacesService(i).getDetails({placeId:e.id},function(t,n){if(n===google.maps.places.PlacesServiceStatus.OK){o.marker=e;var a="<div>";t.name&&(a+="<strong>"+t.name+"</strong>"),t.formatted_address&&(a+="<br>"+t.formatted_address),t.formatted_phone_number&&(a+="<br>"+t.formatted_phone_number),t.opening_hours&&(a+="<br><br><strong>Hours:</strong><br>"+t.opening_hours.weekday_text[0]+"<br>"+t.opening_hours.weekday_text[1]+"<br>"+t.opening_hours.weekday_text[2]+"<br>"+t.opening_hours.weekday_text[3]+"<br>"+t.opening_hours.weekday_text[4]+"<br>"+t.opening_hours.weekday_text[5]+"<br>"+t.opening_hours.weekday_text[6]),t.photos&&(a+='<br><br><img src="'+t.photos[0].getUrl({maxHeight:100,maxWidth:200})+'">'),a+="</div>",o.setContent(a),o.open(i,e),o.addListener("closeclick",function(){o.marker=null})}})}var s={lat:-25.0942395,lng:-50.1626071},i=new google.maps.Map(document.getElementById("map"),{zoom:14,center:s}),l=new google.maps.places.SearchBox(document.getElementById("searchAutoComplete"));l.bindTo("bounds",i),document.getElementById("searchAutoComplete").addEventListener("keypress",function(){e()}),l.addListener("places_changed",function(){o(this)})}var placeMarkers=[];placesList=ko.observableArray();var App=function(){this.address=ko.observable()};$(document).ready(function(){ko.applyBindings(new App)});